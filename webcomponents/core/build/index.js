import{trivetCSS as e,loadFont as t}from"@trvt/assets";const s=[...e];document.adoptedStyleSheets=[...document.adoptedStyleSheets,...s];const n=e=>{const t=document.createElement("div");return t.innerText=e,t.innerHTML},r=(e,t,s={})=>{Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:{data:{...s},get detail(){return this.data}}})};const o=new class{constructor(){this._bus=document.createElement("div"),this.store={}}register(e,t){const s=e||"anonymous";this[s]?console.warn(`Can't register event '${s}' because it already exists.`):(r(this,s),this._bus.addEventListener(s,t))}remove(e,t){this[e]?this._bus.removeEventListener(e,t):console.warn(`Can't remove event '${e}' because it hasn't been registered.`)}fire(e,t={}){this[e]?(t=Object.assign(this[e].data,(e=>{const t={};for(const[s,r]of Object.entries(e)){const o=typeof e[s];/string|boolean|number/.test(o)?t[s]="string"===o?n(r):r:console.warn(`Trivet: Detail property '${s}' of type '${o}' is prohibited and has been removed`)}return t})(t)),this._bus.dispatchEvent(new CustomEvent(e,{detail:t}))):console.warn(`Can't fire event '${e}' because it hasn't been registered.`)}},a=(e,s)=>{(Array.isArray(e)?e:Object.keys(e).map((t=>e[t]))).forEach((e=>t(e,s)))},i=(e,t)=>{window.customElements.get(e)||window.customElements.define(e,t)},c=e=>document.createRange().createContextualFragment(function(e,t){function s(){return(new DOMParser).parseFromString(e,"text/html").body||document.createElement("body")}function n(e){let t=e.querySelectorAll("script");for(let e of t)e.remove()}function r(e,t){let s=t.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!s.includes("javascript:")&&!s.includes("data:"))||(!!e.startsWith("on")||void 0)}function o(e){let t=e.attributes;for(let{name:s,value:n}of t)r(s,n)&&e.removeAttribute(s)}function a(e){let t=e.children;for(let e of t)o(e),a(e)}let i=s();return n(i),a(i),t?i.childNodes:i.innerHTML}(e,!1));const l=e=>{e.querySelectorAll("template[shadowroot]").forEach((e=>{const t=e.getAttribute("shadowroot"),s=e.parentNode.attachShadow({mode:t});s.appendChild(e.content),e.remove(),l(s)}))},d=e=>"object"==typeof e&&!!e.cssRules?e:(e=>{const t=new CSSStyleSheet;return t.replaceSync(e),t})(e);class h{constructor(e){const{element:t,styles:s,declarativeShadow:n=!1}=e;n||l(t),this.stylesList=new Set,this.host=t,this.styles=s}#e(e,t,s){t.forEach((e=>s.add(e))),((e,t)=>{const s=t.map((e=>d(e)));e.adoptedStyleSheets=s})(e,[...s])}get element(){return this.host}set element(e){this.host=e}get shadow(){return this.element.shadowRoot}get styles(){return this.stylesList}set styles(e){this.#e(this.shadow,e,this.stylesList)}}export{h as ShadowStyles,c as createFragment,o as dataBus,i as defineElement,a as fontsLoader,s as styles};
