export{trivetCSS as styles}from"@trvt/assets";const e=e=>{const t=document.createElement("div");return t.innerText=e,t.innerHTML},t=(e,t,s={})=>{Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:{data:{...s},get detail(){return this.data}}})};const s=new class{constructor(){this._bus=document.createElement("div"),this.store={}}register(e,s){const n=e||"anonymous";this[n]?console.warn(`Can't register event '${n}' because it already exists.`):(t(this,n),this._bus.addEventListener(n,s))}remove(e,t){this[e]?this._bus.removeEventListener(e,t):console.warn(`Can't remove event '${e}' because it hasn't been registered.`)}fire(t,s={}){this[t]?(s=Object.assign(this[t].data,(t=>{const s={};for(const[n,r]of Object.entries(t)){const o=typeof t[n];/string|boolean|number/.test(o)?s[n]="string"===o?e(r):r:console.warn(`Trivet: Detail property '${n}' of type '${o}' is prohibited and has been removed`)}return s})(s)),this._bus.dispatchEvent(new CustomEvent(t,{detail:s}))):console.warn(`Can't fire event '${t}' because it hasn't been registered.`)}},n=(e,t)=>{(Array.isArray(e)?e:Object.keys(e).map((t=>e[t]))).forEach((e=>loadFont(e,t)))},r=(e,t)=>{window.customElements.get(e)||window.customElements.define(e,t)},o=e=>document.createRange().createContextualFragment(function(e,t){function s(){return(new DOMParser).parseFromString(e,"text/html").body||document.createElement("body")}function n(e){let t=e.querySelectorAll("script");for(let e of t)e.remove()}function r(e,t){let s=t.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!s.includes("javascript:")&&!s.includes("data:"))||(!!e.startsWith("on")||void 0)}function o(e){let t=e.attributes;for(let{name:s,value:n}of t)r(s,n)&&e.removeAttribute(s)}function a(e){let t=e.children;for(let e of t)o(e),a(e)}let i=s();return n(i),a(i),t?i.childNodes:i.innerHTML}(e,!1));const a=e=>{e.querySelectorAll("template[shadowroot]").forEach((e=>{const t=e.getAttribute("shadowroot"),s=e.parentNode.attachShadow({mode:t});s.appendChild(e.content),e.remove(),a(s)}))},i=e=>"object"==typeof e&&!!e.cssRules?e:(e=>{const t=new CSSStyleSheet;return t.replaceSync(e),t})(e);class c{constructor(e){const{element:t,styles:s,declarativeShadow:n=!1}=e;n||a(t),this.stylesList=new Set,this.host=t,this.styles=s}#e(e,t,s){t.forEach((e=>s.add(e))),((e,t)=>{const s=t.map((e=>i(e)));e.adoptedStyleSheets=s})(e,[...s])}get element(){return this.host}set element(e){this.host=e}get shadow(){return this.element.shadowRoot}get styles(){return this.stylesList}set styles(e){this.#e(this.shadow,e,this.stylesList)}}export{c as ShadowStyles,o as createFragment,s as dataBus,r as defineElement,n as fontsLoader};
